(this["webpackJsonpreact-piano"]=this["webpackJsonpreact-piano"]||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n.n(c),o=n(8),u=n.n(o),i=(n(18),n(19),function(){var e=(new Date).getFullYear();return Object(r.jsxs)("footer",{className:"footer",children:[Object(r.jsx)("a",{href:"https://newline.io",children:"NewLine.co"}),Object(r.jsx)("br",{}),e]})}),s=(n(20),function(){return Object(r.jsxs)("h1",{className:"logo",children:[Object(r.jsx)("span",{role:"img","aria-label":"metal hand emoji",children:"\ud83e\udd18"}),Object(r.jsx)("span",{role:"img","aria-label":"musical keyboard emoji",children:"\ud83c\udfb9"}),Object(r.jsx)("span",{role:"img","aria-label":"musical notes emoji",children:"\ud83c\udfb6"})]})}),l=(n(21),function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:"Sorry/ it's not gonna work :( "}),Object(r.jsxs)("p",{children:["Seems like your browser doesn't support ",Object(r.jsx)("code",{children:"Audio API"}),"."]})]})});function j(){return Object(c.useRef)(window.AudioContext||window.webkitAudioContext||null).current}var p=n(3),b="acoustic_grand_piano",d=Object(c.createContext)({instrument:b,setInstrument:function(){}}),f=(d.Consumer,function(){return Object(c.useContext)(d)}),O=function(e){var t=e.children,n=Object(c.useState)(b),a=Object(p.a)(n,2),o=a[0],u=a[1];return Object(r.jsx)(d.Provider,{value:{instrument:o,setInstrument:u},children:t})},v=n(9);var h=v.map((function(e){return{value:e,label:e.replace(/_/gi," ")}})),m=(n(22),function(){var e=f(),t=e.instrument,n=e.setInstrument;return Object(r.jsx)("select",{className:"instuments",onChange:function(e){var t=e.target;return n(t.value)},value:t,children:h.map((function(e){var t=e.label,n=e.value;return Object(r.jsx)("option",{value:n,children:t},n)}))})}),x=n(5),y=n(4),w=n(2),g=n.n(w),k=n(6),C=n(10),S=n.n(C);var A=Array.from("q2w3er5t6y7u"),N=Array.from("zsxdcvgbhnjm");var D=[0,2,4,5,7,9,11],F={0:"C",1:"C",2:"D",3:"D",4:"E",5:"F",6:"F",7:"G",8:"G",9:"A",10:"A",11:"B"};function P(e){var t=e-24,n=t%12;return{octave:Math.floor(t/12)+1,pitch:F[n],index:n,type:!D.includes(n)?"sharp":"natural",midi:e}}var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fromNote,n=void 0===t?60:t,r=e.toNote,c=void 0===r?83:r;return Array(c-n+1).fill(0).map((function(e,t){return P(n+t)}))}(),L=n(12),I=n(11);n(38);function U(e,t){return(n=t,n.replace(/Key|Digit/gi,"")).toUpperCase()===e.toUpperCase();var n}var M=function(e){var t=e.type,n=e.label,a=Object(L.a)(e,["type","label"]),o=function(e){var t=e.watchKey,n=e.onFinishPress,r=e.onStartPress,a=Object(c.useState)(!1),o=Object(p.a)(a,2),u=o[0],i=o[1];return Object(c.useEffect)((function(){function e(e){var n=e.code;!u&&U(t,n)&&(i(!0),r())}function c(e){var r=e.code;u&&U(t,r)&&(i(!1),n())}return document.addEventListener("keydown",e),document.addEventListener("keyup",c),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",c)}}),[t,u,i,r,n]),u}({watchKey:n,onStartPress:a.onDown,onFinishPress:a.onUp});return Object(r.jsx)("button",Object(y.a)(Object(y.a)({className:Object(I.a)("key key--".concat(t),o&&"is-pressed"),type:"button",onMouseDown:a.onDown,onMouseUp:a.onUp},a),{},{children:n}))},B=(n(39),function(e){var t=e.loading,n=e.play,c=e.stop;return Object(r.jsx)("div",{className:"keyboard",children:E.map((function(e){var a=e.midi,o=e.type,u=e.index,i=function(e,t){return(e<5?A:N)[t]}(e.octave,u);return Object(r.jsx)(M,{type:o,label:i,disabled:t,onDown:function(){return n(a)},onUp:function(){return c(a)}},a)}))})}),K=function(){var e=j(),t=f().instrument,n=function(e){var t=e.AudioContext,n={},r=Object(c.useState)(null),a=Object(p.a)(r,2),o=a[0],u=a[1],i=Object(c.useState)(!1),s=Object(p.a)(i,2),l=s[0],j=s[1],d=Object(c.useState)(null),f=Object(p.a)(d,2),O=f[0],v=f[1],h=Object(c.useRef)(new t);function m(){return(m=Object(k.a)(g.a.mark((function e(){var t,n,r=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:b,j(!0),e.next=4,S.a.instrument(h.current,t);case 4:n=e.sent,j(!1),u(t),v(n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return C.apply(this,arguments)}function C(){return(C=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("suspended"!==h.current.state){e.next=6;break}return e.next=3,h.current.resume();case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=Promise.resolve();case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(k.a)(g.a.mark((function e(t){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:if(O){e.next=4;break}return e.abrupt("return");case 4:r=O.play(t.toString()),n=Object(y.a)(Object(y.a)({},n),{},Object(x.a)({},t,r));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(k.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:if(n[t]){e.next=4;break}return e.abrupt("return");case 4:n[t].stop(),n=Object(y.a)(Object(y.a)({},n),{},Object(x.a)({},t,null));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{loading:l,current:o,load:function(){return m.apply(this,arguments)},play:function(e){return A.apply(this,arguments)},stop:function(e){return N.apply(this,arguments)}}}({AudioContext:e}),a=n.load,o=n.play,u=n.stop,i=n.loading,s=n.current;return Object(c.useEffect)((function(){i||t===s||a(t)}),[a,i,s,t]),Object(r.jsx)(B,{loading:i,play:o,stop:u})},_=function(){return Object(r.jsx)(O,{children:Object(r.jsxs)("div",{className:"playground",children:[Object(r.jsx)(K,{}),Object(r.jsx)(m,{})]})})},G=function(){return j()?Object(r.jsx)(_,{}):Object(r.jsx)(l,{})},J=function(){return Object(r.jsxs)("div",{className:"app",children:[Object(r.jsx)(s,{}),Object(r.jsx)("main",{className:"app-content",children:Object(r.jsx)(G,{})}),Object(r.jsx)(i,{})]})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};u.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(J,{})}),document.getElementById("root")),R()}},[[40,1,2]]]);
//# sourceMappingURL=main.b851c75c.chunk.js.map